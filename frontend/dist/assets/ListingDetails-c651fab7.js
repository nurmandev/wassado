import{j as e,a9 as L,aa as xe,a3 as K,ab as me,ac as ie,a0 as ue,I as pe,J as he,ad as fe,ae as je,r as l,d as J,af as Ne,ag as ve,ah as be,a4 as we,a5 as ye,a6 as I,a7 as z,u as ge,ai as Se,aj as ke,ak as Ce}from"./index-e3a33f33.js";import{r as Te,a as Ie,t as ze,m as q,b as Q,u as B,d as Oe}from"./default-a9117e8e.js";const Le=({listingData:s})=>{var r,d,c,t,a,n,u,m,i,x,f,N;return e.jsxs("div",{className:" flex flex-col text-[#222222]",children:[e.jsx("p",{className:"text-xl md:text-2xl font-medium",children:s==null?void 0:s.name}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-5 items-center justify-end",children:[e.jsxs("div",{className:" flex flex-row flex-wrap md:flex-nowrap items-center gap-2 col-span-4",children:[e.jsx("p",{className:" flex flex-row items-center gap-1",children:(r=s==null?void 0:s.hotel)!=null&&r.ratings?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:16}),e.jsx("p",{className:" text-xs sm:text-sm",children:(d=s==null?void 0:s.hotel)==null?void 0:d.rating})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{size:16}),e.jsx("p",{className:"text-xs sm:text-sm",children:"New"})]})}),e.jsx("span",{children:" 路 "}),e.jsx("p",{className:"text-xs sm:text-sm",children:s!=null&&s.reviews?s==null?void 0:s.reviews:"No reviews"}),e.jsx("span",{children:" 路 "}),e.jsx("p",{className:"text-xs sm:text-sm font-medium underline",children:(t=(c=s==null?void 0:s.hotel)==null?void 0:c.location)!=null&&t.address?(n=(a=s==null?void 0:s.hotel)==null?void 0:a.location)==null?void 0:n.address:(m=(u=s==null?void 0:s.hotel)==null?void 0:u.location)!=null&&m.city?(x=(i=s==null?void 0:s.hotel)==null?void 0:i.location)==null?void 0:x.city:(N=(f=s==null?void 0:s.hotel)==null?void 0:f.location)==null?void 0:N.state})]}),e.jsx("div",{className:"col-span-1 md:flex justify-end w-full hidden",children:e.jsxs("div",{className:" flex flex-row-reverse gap-2 items-center cursor-pointer p-2 rounded-md w-[80px] bg-white hover:bg-[#f1f1f1] transition duration-200 ease-in",children:[e.jsx("p",{className:" text-sm underline underline-offset-1 font-medium",children:"Save"}),e.jsx(xe,{size:18})]})})]})]})},Re=({listingData:s})=>{const r=K();function d(t){const a=[Te,ue,pe],n=(t==null?void 0:t.photos)||[],u=3-n.length;return u>0?[...n,...a.slice(0,u)]:n}const c=d(s);return e.jsxs("div",{className:"flex flex-col md:block gap-5",children:[e.jsxs("div",{className:" flex flex-row gap-1 items-center md:hidden ml-[-12px]",children:[e.jsx("div",{onClick:()=>{r("/")},className:" p-2 rounded-full hover:bg-[#f1f1f1] cursor-pointer transition duration-200 ease-in",children:e.jsx(me,{size:28})}),e.jsx(ie,{to:"/",className:"font-medium",children:"Home"})]}),e.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-3 gap-2 max-h-[400px] min-h-[300px] overflow-y-hidden rounded-md md:rounded-2xl",children:[e.jsx("div",{className:" md:rounded-tl-2xl md:rounded-bl-2xl md:col-span-2",children:e.jsx("img",{src:c[0],alt:"Listing photos",className:" md:rounded-tl-2xl md:rounded-bl-2xl aspect-video object-cover w-full h-[240px] md:h-full"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-none md:grid-rows-2 gap-x-1 md:gap-x-0 gap-y-2 max-h-[400px] min-h-[300px] md:col-span-1",children:[e.jsx("div",{className:" overflow-y-hidden",children:e.jsx("img",{src:c[1],alt:"Listing photos",className:" md:rounded-tr-2xl aspect-video object-cover mb-2 w-full h-full"})}),e.jsx("div",{className:" overflow-y-hidden",children:e.jsx("img",{src:c[2],alt:"Listing photos",className:" md:rounded-br-2xl aspect-video object-cover w-full h-full"})})]})]})]})},Ae=({listingData:s})=>{var t;const c=[29.6567,-95.02791];return console.log(s==null?void 0:s.amenities),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" flex flex-row justify-between items-center max-h-16",children:[e.jsxs("div",{className:" flex flex-col gap-1 text-[#222222]",children:[e.jsxs("h5",{className:"text-lg",children:["This room is offered by"," ",e.jsxs("span",{className:"text-xl font-bold",children:[" ",(t=s==null?void 0:s.hotel)==null?void 0:t.name]})]}),e.jsxs("p",{className:" text-sm md:text-base",children:[e.jsx("span",{className:"text-[#001f53] text-base",children:s==null?void 0:s.maxOccupancy})," ","Guests 路"," "]})]}),e.jsx("div",{children:s?e.jsx(he,{icon:fe,className:"mr-2 w-8 h-8"}):null})]}),e.jsx("hr",{className:" h-[1.2px] w-full bg-[#dddddd] my-8"}),e.jsx("div",{children:e.jsxs("p",{className:" whitespace-pre-wrap",children:[s==null?void 0:s.description,"..."]})}),e.jsx("hr",{className:" h-[1.2px] w-full bg-[#dddddd] my-8"}),e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsx("h2",{className:"text-[22px] text-[#222222] font-medium",children:"What this place offers"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-3 md:gap-x-0 gap-y-4",children:s==null?void 0:s.amenities.map((a,n)=>e.jsx("span",{className:"text-base text-black",children:a},n))})]}),e.jsx("hr",{className:" h-[1.2px] w-full bg-[#dddddd] my-8"}),e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsx("h2",{className:"text-[22px] text-[#222222] font-medium",children:"Where you'll be"}),e.jsx("div",{className:" w-full min-h-[400px]",children:e.jsx(je,{latAndLong:c,zoom:6},"listingMap")})]})]})};function G(s,r){var d;Ie(1,arguments);var c=ze((d=r==null?void 0:r.additionalDigits)!==null&&d!==void 0?d:2);if(c!==2&&c!==1&&c!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof s=="string"||Object.prototype.toString.call(s)==="[object String]"))return new Date(NaN);var t=Ue(s),a;if(t.date){var n=Fe(t.date,c);a=$e(n.restDateString,n.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var u=a.getTime(),m=0,i;if(t.time&&(m=He(t.time),isNaN(m)))return new Date(NaN);if(t.timezone){if(i=We(t.timezone),isNaN(i))return new Date(NaN)}else{var x=new Date(u+m),f=new Date(0);return f.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),f.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),f}return new Date(u+m+i)}var S={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Me=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ee=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Pe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ue(s){var r={},d=s.split(S.dateTimeDelimiter),c;if(d.length>2)return r;if(/:/.test(d[0])?c=d[0]:(r.date=d[0],c=d[1],S.timeZoneDelimiter.test(r.date)&&(r.date=s.split(S.timeZoneDelimiter)[0],c=s.substr(r.date.length,s.length))),c){var t=S.timezone.exec(c);t?(r.time=c.replace(t[1],""),r.timezone=t[1]):r.time=c}return r}function Fe(s,r){var d=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),c=s.match(d);if(!c)return{year:NaN,restDateString:""};var t=c[1]?parseInt(c[1]):null,a=c[2]?parseInt(c[2]):null;return{year:a===null?t:a*100,restDateString:s.slice((c[1]||c[2]).length)}}function $e(s,r){if(r===null)return new Date(NaN);var d=s.match(Me);if(!d)return new Date(NaN);var c=!!d[4],t=g(d[1]),a=g(d[2])-1,n=g(d[3]),u=g(d[4]),m=g(d[5])-1;if(c)return Ge(r,u,m)?Ye(r,u,m):new Date(NaN);var i=new Date(0);return!Ze(r,a,n)||!Be(r,t)?new Date(NaN):(i.setUTCFullYear(r,a,Math.max(t,n)),i)}function g(s){return s?parseInt(s):1}function He(s){var r=s.match(Ee);if(!r)return NaN;var d=O(r[1]),c=O(r[2]),t=O(r[3]);return Ke(d,c,t)?d*q+c*Q+t*1e3:NaN}function O(s){return s&&parseFloat(s.replace(",","."))||0}function We(s){if(s==="Z")return 0;var r=s.match(Pe);if(!r)return 0;var d=r[1]==="+"?-1:1,c=parseInt(r[2]),t=r[3]&&parseInt(r[3])||0;return Je(c,t)?d*(c*q+t*Q):NaN}function Ye(s,r,d){var c=new Date(0);c.setUTCFullYear(s,0,4);var t=c.getUTCDay()||7,a=(r-1)*7+d+1-t;return c.setUTCDate(c.getUTCDate()+a),c}var _e=[31,null,31,30,31,30,31,31,30,31,30,31];function V(s){return s%400===0||s%4===0&&s%100!==0}function Ze(s,r,d){return r>=0&&r<=11&&d>=1&&d<=(_e[r]||(V(s)?29:28))}function Be(s,r){return r>=1&&r<=(V(s)?366:365)}function Ge(s,r,d){return r>=1&&r<=53&&d>=0&&d<=6}function Ke(s,r,d){return s===24?r===0&&d===0:d>=0&&d<60&&r>=0&&r<60&&s>=0&&s<25}function Je(s,r){return r>=0&&r<=59}const qe=({listingData:s,filters:r})=>{var $,H,W,Y;console.log({listingData:s});const d=l.useRef(),c=l.useRef(),t=J(),a=K(),{state:n,setState:u}=B(d),{state:m,setState:i}=B(c),[x,f]=l.useState(r!=null&&r.adults?r==null?void 0:r.adults:1),[N,R]=l.useState(r!=null&&r.rooms?r==null?void 0:r.rooms:1),[v,A]=l.useState(r!=null&&r.children?r==null?void 0:r.children:1),[b,X]=l.useState(x+v),[k,D]=l.useState([]),[M,ee]=l.useState(s==null?void 0:s.basePrice),[E,se]=l.useState((s==null?void 0:s.priceAfterTaxes)-(s==null?void 0:s.basePrice)),[P,re]=l.useState(s==null?void 0:s.authorEarnedPrice),[j,U]=l.useState([{startDate:r!=null&&r.adults?new Date(r==null?void 0:r.checkIn):new Date,endDate:r!=null&&r.adults?new Date(r==null?void 0:r.checkOut):new Date(new Date().setDate(new Date().getDate()+1)),key:"selection"}]),[F,de]=l.useState(1),C=(H=($=j[0])==null?void 0:$.startDate)==null?void 0:H.toISOString(),T=(Y=(W=j[0])==null?void 0:W.endDate)==null?void 0:Y.toISOString(),ce=new Date(C).toLocaleDateString(),te=new Date(T).toLocaleDateString(),oe=o=>{if(console.log({ranges:o}),(o==null?void 0:o.key)==="selection")U([o.selection]);else{const p=new Date(o.selection.startDate),h=new Date(o.selection.endDate);p.setHours(0,0,0,0),h.setHours(0,0,0,0),p.getTime()===h.getTime()&&h.setDate(h.getDate()+1),console.log("Selected Start Date:",p),console.log("Adjusted End Date:",h),U([{startDate:p,endDate:h,key:"selection"}])}},ae=()=>{var p,h;const o={checkIn:(p=j[0])==null?void 0:p.startDate,checkOut:(h=j[0])==null?void 0:h.endDate,rooms:N,adults:x,children:v,roomTypeId:s==null?void 0:s._id,listingData:s};a(`/book/stays/${x}`,{state:{data:o}})};l.useEffect(()=>{(async()=>{const o=await Ne.post(`${ve}reservations/get_reservations`,{id:s==null?void 0:s._id});o.status===200&&D(o.data)})()},[s==null?void 0:s._id]),l.useEffect(()=>{var _,Z;const p=Math.ceil(((_=j[0])==null?void 0:_.endDate)-((Z=j[0])==null?void 0:Z.startDate))/(1e3*60*60*24),h=p===0?1:p,w=(s==null?void 0:s.basePrice)*h,y=Math.round(w*14/100),le=w-Math.round(w*3/100);ee(w),se(y),re(le),de(p)},[j,s==null?void 0:s.basePrice]),l.useEffect(()=>{X(x+v)},[x,v]),l.useEffect(()=>{t(be({listingData:s,formattedStartDate:C,formattedEndDate:T,nightsStaying:F,totalGuest:b,reservationBasePrice:M,tax:E,authorEarned:P}))},[t,s,C,T,F,b,M,E,P]);const ne=(k==null?void 0:k.map(o=>({startDate:G(o.checkIn),endDate:G(o.checkOut)}))).reduce((o,p)=>{const h=new Date(p.startDate),w=new Date(p.endDate),y=new Date(h);for(;y<=w;)o.push(new Date(y)),y.setDate(y.getDate()+1);return o},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full min-h-[315px] rounded-xl border border-[#dddddd] sticky top-32 shadow-customShadow p-6",children:[e.jsxs("div",{className:" flex felx-row justify-between items-start",children:[e.jsxs("div",{className:" flex flex-col",children:[e.jsxs("h3",{className:" text-[22px] text-[#222222] font-semibold",children:["$",s.pricePerNight]}),e.jsx("p",{className:" text-[#313131] text-sm",children:"Price Per Night"})]}),e.jsxs("span",{className:" text-sm text-[#222222] flex flex-row gap-1 items-center mt-2",children:[e.jsx(L,{size:18}),s!=null&&s.ratings?s==null?void 0:s.ratings:"New",(s==null?void 0:s.reviews)&&e.jsxs("span",{children:[e.jsx("span",{children:"路"}),e.jsx("span",{children:s==null?void 0:s.reviews})]})]})]}),!n&&e.jsx("div",{className:" rounded-tl-lg rounded-tr-lg border border-[#b9b9b9] w-full min-h-[60px] mt-6 relative flex flex-col",children:e.jsx("div",{children:e.jsxs("div",{onClick:()=>{u(!0)},className:" grid grid-cols-2 cursor-pointer",children:[e.jsxs("div",{className:"px-3 py-3",children:[e.jsx("p",{className:" text-[10px] text-black font-semibold uppercase",children:"check-in"}),e.jsx("p",{className:" text-sm text-[#222222]",children:ce})]}),e.jsxs("div",{className:"px-3 py-3 border-l border-[#b9b9b9]",children:[e.jsx("p",{className:" text-[10px] text-black font-semibold uppercase",children:"checkout"}),e.jsx("p",{className:" text-sm text-[#222222]",children:te})]})]})})}),!n&&e.jsx("div",{ref:c,onClick:()=>{i(o=>!o)},children:e.jsx("div",{className:" rounded-bl-lg rounded-br-lg border border-[#b9b9b9] w-full min-h-[50px] cursor-pointer relative",children:e.jsxs("div",{className:"px-3 py-3 flex flex-row items-center justify-between",children:[e.jsxs("div",{className:" flex flex-col",children:[e.jsx("p",{className:" text-[10px] text-black font-semibold uppercase",children:"guests"}),e.jsxs("p",{className:" text-sm text-[#222222]",children:[b," ",b===1?"guest":"guests"]})]}),e.jsx("div",{children:m?e.jsx(we,{size:26}):e.jsx(ye,{size:26})})]})})}),m&&e.jsxs("div",{ref:c,className:"min-h-[240px] w-72 shadow-lg border absolute z-[90] bg-white px-4 py-5 rounded-md",children:[e.jsxs("div",{className:" flex flex-col gap-5",children:[e.jsxs("div",{className:" flex felx-row items-center justify-between",children:[e.jsx("span",{children:e.jsx("p",{className:" text-base text-[#222222] font-medium",children:"Rooms"})}),e.jsxs("span",{className:" flex flex-row-reverse items-center gap-2",children:[e.jsx("button",{onClick:()=>{R(o=>o+1)},disabled:N===4,className:" p-2 rounded-full border border-[#c0c0c0] opacity-90 disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(I,{size:16})}),e.jsx("p",{className:" w-[30px] flex justify-center",children:N}),e.jsx("button",{onClick:()=>{R(o=>o-1)},disabled:N===0,className:" p-2 rounded-full border border-[#c0c0c0] disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(z,{size:16})})]})]}),e.jsxs("div",{className:" flex felx-row items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("p",{className:" text-base text-[#222222] font-medium",children:"Adults"}),e.jsx("p",{className:" text-sm text-[#313131]",children:"Age 13+"})]}),e.jsxs("span",{className:" flex flex-row-reverse items-center gap-2",children:[e.jsx("button",{onClick:()=>{f(o=>o+1)},disabled:b===8,className:" p-2 rounded-full border border-[#c0c0c0] opacity-90 disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(I,{size:16})}),e.jsx("p",{className:" w-[30px] flex justify-center",children:x}),e.jsx("button",{onClick:()=>{f(o=>o-1)},disabled:x===1,className:" p-2 rounded-full border border-[#c0c0c0] disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(z,{size:16})})]})]}),e.jsxs("div",{className:" flex felx-row items-center justify-between",children:[e.jsxs("span",{children:[e.jsx("p",{className:" text-base text-[#222222] font-medium",children:"Children"}),e.jsx("p",{className:" text-sm text-[#313131]",children:"Ages 2-12"})]}),e.jsxs("span",{className:" flex flex-row-reverse items-center gap-2",children:[e.jsx("button",{onClick:()=>{A(o=>o+1)},disabled:b===8,className:" p-2 rounded-full border border-[#c0c0c0] opacity-90 disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(I,{size:16})}),e.jsx("p",{className:" w-[30px] flex justify-center",children:v}),e.jsx("button",{onClick:()=>{A(o=>o-1)},disabled:v===0,className:" p-2 rounded-full border border-[#c0c0c0] disabled:cursor-not-allowed disabled:opacity-20",children:e.jsx(z,{size:16})})]})]})]}),e.jsx("div",{className:" flex justify-end absolute bottom-3 right-2",children:e.jsx("button",{onClick:()=>{i(!1)},className:"underline text-base text-[#222222] font-medium px-3 py-2 rounded-lg hover:bg-[#f5f5f5]",children:"Close"})})]}),!m&&!n&&e.jsx("div",{className:" mt-6 flex justify-center rounded-md",children:e.jsx("button",{onClick:()=>{ae()},className:"capitalize py-3 w-full bg-[#1b4281] hover:bg-[#002662] transition duration-200 ease-in text-white font-medium text-sm rounded-md",children:"reserve"})}),n?e.jsx("div",{ref:d,className:" absolute border-b-[1.2px] border-neutral-200 shadow-md left-[2px] sm:translate-x-[30%] sm:translate-y-[0%] md:translate-x-[-30%] lg:translate-x-[-20%] xl:translate-x-0 xl:translate-y-0",children:e.jsx(Oe.DateRange,{rangeColors:["#262626"],date:new Date,editableDateInputs:!0,onChange:oe,moveRangeOnFirstSelection:!1,ranges:j,disabledDates:ne,direction:"vertical",showDateDisplay:!1,minDate:new Date})}):null]})})},Qe=()=>e.jsx("div",{className:"max-w-screen-xl xl:px-12 mx-auto py-7 animate-pulse",children:e.jsxs("div",{className:" flex flex-col gap-7",children:[e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx("div",{className:" h-8 w-1/2 bg-[#dddddd]"}),e.jsxs("div",{className:" grid grid-cols-5 items-center justify-end",children:[e.jsx("div",{className:" flex flex-row items-center gap-2 col-span-4",children:e.jsx("div",{className:" h-5 w-1/2 bg-[#dddddd]"})}),e.jsx("div",{className:"col-span-1 flex justify-end ",children:e.jsx("div",{className:"h-5 w-1/2 bg-[#dddddd]"})})]})]}),e.jsxs("div",{className:" grid grid-cols-3 gap-2 max-h-[400px] min-h-[300px] rounded-2xl",children:[e.jsx("div",{className:" rounded-tl-2xl rounded-bl-2xl col-span-2 w-full h-full bg-[#dddddd]"}),e.jsxs("div",{className:"grid grid-rows-2 gap-y-2 max-h-[400px] min-h-[300px] col-span-1",children:[e.jsx("div",{className:"w-full h-full bg-[#dddddd] rounded-tr-2xl"}),e.jsx("div",{className:"w-full h-full bg-[#dddddd] rounded-br-2xl"})]})]})]})}),es=()=>{var m;const[s,r]=l.useState(!0),d=ge(i=>i.house.listingDetails),c=Se();console.log({selectedRoomData:d});const t=ke();console.log({location:t});const a=J(),n=["https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=600","https://images.pexels.com/photos/279746/pexels-photo-279746.jpeg?auto=compress&cs=tinysrgb&w=600","https://images.pexels.com/photos/271618/pexels-photo-271618.jpeg?auto=compress&cs=tinysrgb&w=600"],u={...d==null?void 0:d.listing,photos:n};return console.log({listingData:u}),l.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),l.useEffect(()=>{async function i(){await a(Ce(c.id)),r(!1)}i()},[c.id,a]),s?e.jsx(Qe,{}):e.jsxs("main",{className:"max-w-screen-xl xl:px-12 mx-auto py-7 px-5 sm:px-16 md:px-8",children:[e.jsxs("section",{className:" flex flex-col-reverse md:flex-col gap-7",children:[e.jsx(Le,{listingData:d}),e.jsx(Re,{listingData:d})]}),e.jsxs("section",{className:" grid grid-cols-1 md:grid-cols-8 lg:grid-cols-6 md:gap-x-8 lg:gap-x-20 pt-8 sm:pt-12 md:pt-16",children:[e.jsx("div",{className:"md:col-span-5 lg:col-span-4 order-2 md:order-1 flex flex-col min-h-[800px] pt-16 sm:pt-20 md:pt-0",children:e.jsx(Ae,{listingData:d})}),e.jsx("div",{className:"md:col-span-3 lg:col-span-2 order-1 md:order-2 max-h-[900px]",children:e.jsx(qe,{listingData:d,filters:(m=t==null?void 0:t.state)==null?void 0:m.data})})]})]})};export{es as default};
