import{y as f,z as N,r as l,u as X,d as E,e as S,j as r,L as _,D as h}from"./index-e3a33f33.js";var y=globalThis&&globalThis.__assign||function(){return y=Object.assign||function(e){for(var a,o=1,t=arguments.length;o<t;o++){a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},y.apply(this,arguments)},L=globalThis&&globalThis.__rest||function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)a.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(o[t[s]]=e[t[s]]);return o},n=[1,3,5],z=[f("PropagateLoader","25% {transform: translateX(-".concat(n[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(n[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(n[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-0"),f("PropagateLoader","25% {transform: translateX(-".concat(n[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(n[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(n[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-1"),f("PropagateLoader","25% {transform: translateX(-".concat(n[0],`rem) scale(0.75)}
    75% {transform: translateX(-`).concat(n[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-2"),f("PropagateLoader","25% {transform: translateX(".concat(n[0],`rem) scale(0.75)}
    75% {transform: translateX(`).concat(n[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-3"),f("PropagateLoader","25% {transform: translateX(".concat(n[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(n[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(n[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-4"),f("PropagateLoader","25% {transform: translateX(".concat(n[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(n[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(n[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-5")];function I(e){var a=e.loading,o=a===void 0?!0:a,t=e.color,s=t===void 0?"#000000":t,x=e.speedMultiplier,i=x===void 0?1:x,g=e.cssOverride,j=g===void 0?{}:g,m=e.size,d=m===void 0?15:m,c=L(e,["loading","color","speedMultiplier","cssOverride","size"]),u=N(d),v=u.value,b=u.unit,P=y({display:"inherit",position:"relative"},j),p=function(O){return{position:"absolute",fontSize:"".concat(v/3).concat(b),width:"".concat(v).concat(b),height:"".concat(v).concat(b),background:s,borderRadius:"50%",animation:"".concat(z[O]," ").concat(1.5/i,"s infinite"),animationFillMode:"forwards"}};return o?l.createElement("span",y({style:P},c),l.createElement("span",{style:p(0)}),l.createElement("span",{style:p(1)}),l.createElement("span",{style:p(2)}),l.createElement("span",{style:p(3)}),l.createElement("span",{style:p(4)}),l.createElement("span",{style:p(5)})):null}const T=()=>{const e=X(m=>m.house.newHouse),[a,o]=l.useState([]),[t,s]=l.useState(null),[x,i]=l.useState(!1),g=E(),j=m=>{if(a.length>=3){h.error("Maximum images uploaded");return}else s(m.target.files[0])};return l.useEffect(()=>{g(S(e==null?void 0:e.houseType,e==null?void 0:e.privacyType,e==null?void 0:e.location,e==null?void 0:e.floorPlan,e==null?void 0:e.amenities,a))},[a,g]),l.useEffect(()=>{async function m(){if(t!==null&&(t==null?void 0:t.size)/5e5<5){const d=new FormData;d.append("file",t),d.append("upload_preset","house-hunter"),d.append("cloud_name","dlhexsnxq"),i(!0);try{await fetch("https://api.cloudinary.com/v1_1/dlhexsnxq/image/upload",{method:"POST",body:d}).then(c=>c.json()).then(c=>{var u;o([...a,c.url]),c.error?(h.error((u=c==null?void 0:c.error)==null?void 0:u.message),i(!1),o(null)):i(!1)}).catch(c=>{h.error(c.message+"try again"),i(!1)})}catch(c){h.error(c),i(!1)}finally{i(!1),s(null)}}else(t==null?void 0:t.size)/5e5>5&&(h.error("Image size can't exceed 5mb"),i(!1))}m()},[t]),r.jsxs("label",{htmlFor:"houseImage",className:" py-20 bg-white border-dashed border-[#b0b0b0] border flex justify-center items-center min-h-[340px]",children:[x?r.jsx(r.Fragment,{children:r.jsx(I,{loading:!0,color:"#717171"})}):r.jsxs("div",{className:" flex flex-col justify-center items-center gap-3",children:[r.jsx("div",{children:r.jsx(_,{size:72})}),r.jsxs("div",{className:"text-center h-[100px]",children:[r.jsx("h6",{className:" text-2xl text-black font-medium py-2",children:"Select your photos here"}),r.jsx("p",{className:" text-[#717171] text-lg",children:a.length!==0?r.jsx(r.Fragment,{children:a.length===3?`${a.length} images uploaded`:`Choose ${3-a.length} more photos`}):"Choose at least 3 photos"}),r.jsx("p",{className:" text-black text-sm underline underline-offset-2 font-medium cursor-pointer",children:"Upload from your device"})]})]}),r.jsx("input",{type:"file",name:"photos",className:" hidden",onChange:j,id:"houseImage",multiple:!0,accept:".jpg,.jpeg,.png,image/jpeg,image/jpg,image/png"})]})},F=()=>{const e=X(t=>{var s;return(s=t.house.newHouse)==null?void 0:s.photos}),[a,o]=l.useState([]);return l.useEffect(()=>{o([...a,e])},[e]),r.jsxs("div",{className:" flex flex-col gap-20 max-w-screen-md mx-auto my-6 min-h-[70vh]",children:[r.jsxs("div",{className:"flex flex-col gap-3 md:gap-0",children:[r.jsx("h1",{className:" text-[#222222] text-2xl md:text-[32px] font-medium",children:"Add some photos of your cabin"}),r.jsx("p",{className:"text-base md:text-lg text-[#717171]",children:"You'll need 5 photos to get started. You can add more or make changes later."})]}),r.jsx(T,{}),r.jsx("div",{className:" grid grid-cols-2 gap-5 items-center",children:a.length===0?null:e==null?void 0:e.map((t,s)=>r.jsx("div",{children:r.jsx("img",{src:t,alt:"Houses",className:"border shadow-md"})},s))})]})};export{F as default};
